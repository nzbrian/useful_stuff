#https://deepmind.com/blog/wavenet-generative-model-raw-audio/
#https://arxiv.org/pdf/1609.03499.pdf
#https://github.com/ibab/tensorflow-wavenet

git clone https://github.com/ibab/tensorflow-wavenet.git
cd tensorflow-wavenet/

#install the tensorflow package that we created earlier.
pip install librosa
pip install /tmp/tensorflow_pkg/tensorflow-*

#download the training data (11G) from https://datashare.is.ed.ac.uk/handle/10283/2651
wget http://datashare.is.ed.ac.uk/download/DS_10283_2651.zip
unzip DS_10283_2651.zip
unzip VCTK-Corpus.zip

#train the model
#I'm getting lots of the below out of memory errors, and trying on a very small dataset with threshold = 0 still runs out of memory
#probably 0.1 will be better.

#python train.py --data_dir=VCTK-Corpus > train.log 2>&1
#python train.py --data_dir=VCTK-Corpus --silence_threshold=0 > train.log 2>&1

python train.py --data_dir=VCTK-Corpus --silence_threshold=0.1 > train.log 2>&1

#then in another window
tail -f train.log

#if you get this error: tensorflow.python.framework.errors_impl.ResourceExhaustedError: OOM when allocating tensor with shape
#then your GPU is out of memory (I get this with a 4GB 1050Ti. You need to use a smaller dataset. So
mkdir Corpus_ignore
mkdir Corpus_ignore/wav48
mkdir Corpus_ignore/txt
mv VCTK-Corpus/wav48/p2* Corpus_ignore/wav48/
mv VCTK-Corpus/wav48/p3[1-7]* Corpus_ignore/wav48/
mv VCTK-Corpus/txt/p2* Corpus_ignore/txt/
mv VCTK-Corpus/txt/p3[1-7]* Corpus_ignore/txt/
